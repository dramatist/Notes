### i18n

使用场景

* 普通国际化文案
* Bean Validation校验国际化文案
* Web站点页面渲染
* Web MVC错误提示

MessageSource

* ResourceBundleMessageSource：基于ResourceBundle+MessageFotmat
* ReloadableResourceBundleMessageSource：基于Properties+MessageFormat
* StaticMessageSource：手动注册Message
* DelegatingMessageSource：默认内置MessageSource Bean

层次性：HierarchicalMessageSource

### Validation

使用场景

* 常规校验 Validator

* 数据绑定 DataBinder

* Web参数绑定 WebDataBinder

* WebMVC/WebFlux 方法参数校验

org.springframework.validation.Validator：校验器

* supports(Class)：类型是否能校验
* validate(Object, Errors)：校验对象，并将校验失败内容输出到Errors

* org.springframework.validation.ValidationUtils：工具类

* org.springframework.validation.Errors：错误收集器
    * reject：收集对象错误文案ObjectErrors
    * rejectValue：收集对象字段错误文案FieldErrors

**和Bean Validation整合**

JSR303、JSR349

LocalValidatorFactoryBean，Spring Validator和Java Validator的适配器，不是FactoryBean的实现类，

MethodValidationPostProcessor，Bean方法参数校验

BeanValidationPostProcessor，Bean属性校验

### Data Binding

使用场景

* BeanDefinition 到 Bean

* 数据绑定 DataBinder

* Web参数绑定 WebDataBinder

org.springframework.validation.DataBinder

* WebDataBinder
* ServletRequestDataBinder
* WebRequestDataBinder
* WebExchangeDataBinder

参数

* target：关联目标对象
* objectName：对象名称
* bindingResult：绑定结果
* typeConverter：类型转换器
* conversionService：类型转换服务
* messageCodeResolver：校验错误文案Code处理器
* validators：校验器集合

BeanWrapper

* Spring 底层 JavaBeans 基础设施的中心化接口
* 通常不会直接使用，间接用于 BeanFactory 和 DataBinder
* 提供标准 JavaBeans 分析和操作，能够单独或批量存储 Java Bean 的属性(properties)
* 支持嵌套属性路径(nested path)
* 实现类 org.springframework.beans.BeanWrapperImpl

### Type Conversion

使用场景

* 数据绑定
* BeanWrapper
* Bean属性类型转换
* 外部化属性类型转换

基于JavaBeans PropertyEditor的类型转换

* 将String类型转为目标类型

* Spring调用PropertyEditor#setAsText传递文本，PropertyEditor将Text转换为目标对象，并通过setValue缓存，最终Spring通过PropertyEditor#getValue获取转换后的对象

Spring3.0 通用类型转换  Converter<S,T>

* 由于范型擦写，缺少SourceType和TargetType前置判断，增加ConditionalConverter实现

* 仅能转换单一的SourceType和TargetType，使用GenericConverter替换

* 内建实现
    * 日期时间 org.springframework.format.datetime
    * Java8日期时间 org.springframework.format.datetime.stardard
    * 通用 org.springframework.core.convert.support

扩展

1. PropertyEditor
    * 通过CustomEditorConfigurer将自定义PropertyEditor注册到容器中
2. Converter
    * 实现Converter、GenericConverter或ConverterFactory接口
    * 通过ConversionServiceFactoryBean或ConversionService注册Converter，Bean名称必须为conversionService

ConversionService

* GenericConversionService，通用实现，不包含内置转换器
* DefaultConversionService，基础实现，包含内置转换器
* FormattingConversionService，通用Formatter+GenericConversionService实现，不包含内置转换器和Formatter
* DefaultFormattingConversionService，DefaultConversionService+格式化实现，如JSR354 Money&Currency， JSR310 DateTime

TypeConverter

* convertIfNescessary
* TypeConverterSupport
* TypeConverterDelegate
